<!--
/***************************************
 * @file popover.html
 * @author Travis Roman (travis@toggleable.com)
 * @project JavaScript Blocker (http://javascript-blocker.toggleable.com)
 * @version 1.2.4
 ***************************************/
-->

<!DOCTYPE html>

<html lang="en">
<head>
	<title></title>
	
	<meta charset="utf-8" />
	
	<link rel="stylesheet" href="css/poppy.css" type="text/css" />
	<link rel="stylesheet" href="css/main.css" type="text/css" />
	<link rel="stylesheet" href="css/highlight.css" />
	
	<script src="js/highlight.js"></script>
	<script>
		document.addEventListener('DOMContentLoaded', function () {
			safari.extension.globalPage.contentWindow.JavaScriptBlocker.hljs = hljs;
			setTimeout(function () {
				safari.extension.globalPage.contentWindow.JavaScriptBlocker.bind_events();
			}, 200);
		});
		
		window.addEventListener('message', function (event) {
			if (event.data === 'reloadOnce') window.location.reload();
		});
	</script>
</head>

<body>
	<header><h1>JavaScript Blocker</h1></header>
	
	<div id="container">
		<div id="setup">
			<p><img src="images/toggleable.png" alt="Toggleable" /> <img src="Icon-48.png" alt="JS Blocker" /></p>
			<p>Thanks for using JavaScript Blocker!</p>
			<p>Which mode would you like to run in? This setting can be changed at any time from the extensions pane of
				the Safari preferences.</p>
			<p><input type="button" id="setup-block" value="Blocking Mode" /> <input type="button" id="setup-allow" value="Allowing Mode" /></p>
		</div>
		<div id="main">
			<div id="page-lists">
				<label class="label">Page:</span>
				<select id="page-list">
					<optgroup label="Main Page">
						<option>http://javascript-blocker.toggleable.com</option>
					</optgroup>
					<optgroup label="Inline Frame Pages">
						<option>http://example.com</option>
					</optgroup>
				</select>
			</div>
			<div class="info-container">
				<label class="allowed-label" for="allowed-scripts-count">Allowed:</label> <span id="allowed-scripts-count">0</span>
				<select id="block-options" class="domain-options">
					<optgroup label="Block on…">
					</optgroup>
				</select>
				<input type="button" value="Block All" id="block-domain" />
			</div>
	
			<div id="allowed-script-urls">
				<ul></ul>
			</div>
	
			<div class="info-container">
				<label class="blocked-label" for="blocked-scripts-count">Blocked:</label> <span id="blocked-scripts-count">0</span>
				<select id="allow-options" class="domain-options">
					<optgroup label="Allow on…">
					</optgroup>
				</select>
				<input type="button" value="Allow All" id="allow-domain" />
			</div>
	
			<div id="blocked-script-urls">
				<ul></ul>
			</div>
	
			<div class="info-container">
				<label class="unblocked-label" for="unblocked-scripts-count">Unblockable:</label> <span id="unblocked-scripts-count">0</span>
			</div>
	
			<div id="unblocked-script-urls">
				<ul></ul>
			</div>
	
			<input type="button" value="Show Rules" id="view-rules" />
			<div id="disclaimer">
				<p>This tool only blocks scripts when they are loaded from an external file or a data URI. What this means is that any scripts
					that are within the page itself can still run. Unfortunately this is a limitation of the Safari extension design, not mine.
					<input type="button" value="Submit Anonymous Usage Information" id="submit-information" />
					<input type="button" value="Disable JavaScript Blocker" id="disable" /></p>
			</div>
		</div>
		<div id="rules-list">
			<div class="info-container">
				<p class="misc-info">0 domains, 0 rules</p>
				<input type="button" value="Close Rules List" id="rules-list-back" />
				<input type="button" value="Delete Expanded Rules" id="reset-domain" />
			</div>
			<div id="data">
				<a href="javascript:void(0)" id="collapse-all">Collapse All</a> <span class="label">—</span>
				<a href="javascript:void(0)" id="expand-all">Expand All</a>
				<div id="rules-filter-bar">
					<ul>
						<li id="filter-all"class="selected">All</li>
						<li id="filter-collapsed">Collapsed</li>
						<li id="filter-expanded">Expanded</li>
						<li id="li-domain-filter"><input type="search" placeholder="Domains" incremental="incremental" results="10" autosave="domain_filter" id="domain-filter" /><br style="clear:both;" /></li>
					</ul>
					<br style="clear:both;" />
				</div>
				<ul id="rules-list-rules"></ul>
			</div>
		</div>
		<div id="misc">
			<div class="info-container">
				<p class="misc-info"></p>
				<input type="button" value="Close" id="misc-close" />
			</div>
			<div id="misc-content"></div>
		</div>
	</div>
</body>
</html>